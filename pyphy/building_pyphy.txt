(9-10)-Mar-2006

Building pyphy on grove001.scs.fsu.edu

o downloaded subversion-1.3.0.tar.gz from http://subversion.tigris.org/ and built the SVN client
	cd $HOME
	tar zxvf subversion-1.3.0.tar.gz
	cd subversion-1.3.0 
	./configure --prefix=$HOME/local
	make
	make install
o checked out cipres using SVN 
	cd $HOME
	svn co http://nladr-cvs.sdsc.edu/svn/CIPRES/cipresdev/trunk/cipres
o downloaded boost_1_33_1.tar.gz from http://www.boost.org/ and installed
	cd $HOME
	tar zxvf boost_1_33_1.tar.gz 
o downloaded numarray-1.5.1.tar.gz and installed in $HOME/site-packages as follows:
	cd $HOME
	tar zxvf numarray-1.5.1.tar.gz
	cd $HOME/numarray-1.5.1
	mkdir $HOME/site-packages
	python setup.py install --gencode --install-lib=$HOME/site-packages --install-headers=$HOME/site-packages/numarray
o built bjam
	cd $HOME/boost_1_33_1/tools/build/jam_src
	chmod +x build.sh
	./build.sh
o copied bjam into $HOME/local/bin
	cd $HOME/boost_1_33_1/tools/build/jam_src/bin.macosxppc
	cp bjam $HOME/local/bin		     
o checkout phycasdev using CVS
	cvs -d cvs.csit.fsu.edu:/usr/local/cvs co phycasdev
o ran freshmake.py (PYTHONPATH must include $HOME/phycasdev/python)
	cd $HOME/phycasdev
	python freshmake.py --code
	17-May-2006: Mark says this is no longer necessary, the setup files are now in the repository so they 
	  do not need to be generated
o NOTE: NOT SURE THIS IS A GOOD IDEA
	Based on posting by Ryan McGann (2005-12-18, http://lists.boost.org/boost-users/2005/12/15934.php),
	I added "|| defined(__APPLE__)" to boost/bind/placeholders.hpp to avoid multiple definitions of _1, _2, etc.
		line 40 before: #elif defined(BOOST_MSVC) || (defined(__DECCXX_VER) && __DECCXX_VER <= 60590031) || defined(__MWERKS__)
		line 40 after:  #elif defined(BOOST_MSVC) || (defined(__DECCXX_VER) && __DECCXX_VER <= 60590031) || defined(__MWERKS__) || defined(__APPLE__)
	This change leads to lots of warnings like this
		/home/u8/users/plewis/boost_1_33_1/boost/bind/placeholders.hpp:44: warning: `
   			boost::arg<3> <unnamed>::_3' defined but not used
   	but at least it compiles. I noticed that the INCLUDE_TO_AVOID_LINK_ERROR macro used 
   	in cipres_nexus_reader.cpp seems to be addressing a similar problem
o converted phycasdev/pyphy/dojam to sh (rather than tcsh) because the PATH was not getting carried over and commands 
  like mkdir could not be found by bjam. dojam now looks like this:
	#!/bin/sh
	
	export PATH=.:$HOME/local/bin:/usr/local/condor/bin:$PATH
	export PYTHON_VERSION=2.4
	export DYLD_LIBRARY_PATH=$HOME/phycasdev/pyphy/bin/boost/libs/python/build/libboost_python.dylib/darwin/release/shared-linkable-true
	export CVS_RSH=/usr/bin/ssh
	export BOOST_ROOT=$HOME/boost_1_33_1
	export CIPRES_LIB_ROOT=$HOME/cipres/framework
	export PYTHONPATH=$HOME/site-packages/numarray:$HOME/phycasdev/pyphy/pyphy:$HOME/phycasdev/pyphy/apps:$HOME/phycasdev/python
	export PYTHON_ROOT=/Library/Frameworks/Python.framework/Versions/2.4
	
	export PHYCAS_ROOT=$HOME/phycasdev
	export NCL_ROOT=$HOME/phycasdev
	export BUILD=release
	export TOOLS=darwin
	bjam -q	
o had to add the following line to phycasdev/pyphy/Jamrules under variant common so that numarray header files could be located
	<darwin><include>$(HOME)/site-packages
o ran phycasdev/pyphy/dojam script to build the libboost_python.dylib and *.so files
o set up .tcshrc as follows:
	setenv PYTHONPATH "$HOME/phycasdev/pyphy/pyphy:$HOME/phycasdev/pyphy/apps:$HOME/phycasdev/python"



20-Jan-2006

Here are some things I had to do to get pyphy to build on lewis.eeb.uconn.edu
using GCC running under Fedora Core 4

o in .tcshrc set the following environmental variables (some you may not know
  until some of the later steps have been completed)
	setenv CVS_RSH "/usr/bin/ssh" 
	setenv BOOST_ROOT "$HOME/boost_1_33_1"
	setenv CIPRES_LIB_ROOT "$HOME/cipres/framework"
	setenv PYTHON_ROOT "/usr"
	setenv PYTHON_VERSION 2.4
	setenv PYTHONPATH "$HOME/phycasdev/python:$HOME/phycasdev/pyphy/apps:$HOME/phycasdev/pyphy/pyphy"

o checkout cipres using SVN 
	svn co http://nladr-cvs.sdsc.edu/svn/CIPRES/cipresdev/trunk/cipres

o checkout phycasdev using CVS
	cvs -d cvs.csit.fsu.edu:/usr/local/cvs co phycasdev

o download and install boost from http://www.boost.org

o run freshmake.py (PYTHONPATH must include $HOME/phycasdev/python)
	cd $HOME/phycasdev
	python freshmake.py -t JAM --cpp
	
	Note: bjam issued these error messages (I think a lot of these GCC options 
	are only available on the Mac version; we need to specify different ones
	for linux gcc in the Jamrules file):
		cc1plus: error: unrecognized command line option "-Wno-long-double"
		cc1plus: error: unrecognized command line option "-Wmost"
		cc1plus: error: unrecognized command line option "-Wno-four-char-constants"
		cc1plus: error: unrecognized command line option "-Wno-long-double"
		cc1plus: error: unrecognized command line option "-Wmost"
		cc1plus: error: unrecognized command line option "-Wno-four-char-constants"
